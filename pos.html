<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>TEXAS POS</title>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <div id="app-container" class="loaded">
        <!-- ส่วนแสดงชื่อผู้ใช้ และปุ่มออก -->
        <div id="top-bar">
            <span id="current-user-name"></span>
            <button id="logout-button">ออกจากระบบ</button>
        </div>

        <!-- แถบเมนูด้านซ้าย -->
        <div id="sidebar-nav">
            <div class="nav-item active" data-tab="sell-view">ขายสินค้า</div>
            <div class="nav-item" data-tab="history-view">ประวัติขาย</div>
            <div class="nav-item admin-only" data-tab="admin-view">หลังบ้าน</div>
        </div>

        <!-- หน้าหลักการขาย -->
        <div id="sell-view" class="content-view">
            <div id="category-tabs"></div>
            <div id="product-grid"></div>
            <div id="cart-section">
                <div id="cart-items"></div>
                <div id="cart-summary">
                    <div id="total-price">฿0</div>
                    <button id="checkout-button">ชำระเงิน</button>
                </div>
            </div>
        </div>

        <!-- หน้าดูประวัติการขาย -->
        <div id="history-view" class="content-view" style="display: none;">
            <table>
                <thead>
                    <tr>
                        <th>เวลา</th>
                        <th>สินค้า</th>
                        <th>ยอดรวม</th>
                        <th>ช่องทาง</th>
                        <th>พนักงาน</th>
                    </tr>
                </thead>
                <tbody id="history-table-body"></tbody>
            </table>
        </div>

        <!-- ปุ่มปิดกะ -->
        <button id="end-shift-button">ปิดกะ</button>

        <!-- Modal: เลือกราคา -->
        <div id="multi-price-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h3 id="modal-product-name"></h3>
                <div id="modal-price-options"></div>
                <button id="modal-close-button">ปิด</button>
            </div>
        </div>

        <!-- Modal: ช่องทางการจ่ายเงิน -->
        <div id="payment-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h3>เลือกรูปแบบการชำระ</h3>
                <div class="payment-options">
                    <button class="payment-option-button" data-method="cash">เงินสด</button>
                    <button class="payment-option-button" data-method="transfer">โอนชำระ</button>
                </div>
                <button id="payment-modal-close-button">ปิด</button>
            </div>
        </div>

        <!-- Modal: รับเงิน & เงินทอน -->
        <div id="change-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h3>กรอกจำนวนเงินที่รับ</h3>
                <p>ยอดรวม: <span id="change-modal-total">฿0</span></p>
                <input type="number" id="money-received-input" placeholder="จำนวนเงินที่รับ" />
                <p>เงินทอน: <span id="change-due-amount">฿0</span></p>
                <button id="confirm-payment-button">ยืนยันการชำระ</button>
                <button id="change-modal-close-button">ปิด</button>
            </div>
        </div>

        <!-- Modal: สรุปยอดปิดกะ -->
        <div id="shift-summary-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h3>สรุปยอดขายของกะ</h3>
                <p>ยอดรวมทั้งหมด: <span id="shift-total-sales">฿0</span></p>
                <p>เงินสด: <span id="shift-cash-sales">฿0</span></p>
                <p>โอน: <span id="shift-transfer-sales">฿0</span></p>
                <button id="shift-summary-close-button">ปิด</button>
            </div>
        </div>

        <!-- Overlay โหลดข้อมูล -->
        <div id="loading-overlay" class="modal-overlay" style="display: none;">
            <div class="loading-spinner">กำลังโหลด...</div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/supabaseClient.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
